<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 使用hexo搭建博客 · Hexo</title><meta name="description" content="使用hexo搭建博客 - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Hexo"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/guihuashitang" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">使用hexo搭建博客</h1><div class="post-info">Jul 22, 2019</div><div class="post-content"><p>最近使用hexo搭建了个人博客，先记录一下自己的搭建过程。</p>
<h2 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h2><p>首先需要安装<a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a>和<a href="http://nodejs.cn/download/" target="_blank" rel="noopener">nodeJs</a>。因为nodeJs集成了npm，所以不用单独安装npm。一路next即可，安装完成可用git -v、node -v、npm -v查看</p>
<h2 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h2><p>创建一个新的文件夹，在这个文件夹下右键打开Git Bash Here，输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>或者可以使用淘宝镜像：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line">$ cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>之后初始化hexo</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init myHexo <span class="comment">#名字可以自行更改</span></span><br><span class="line">$ <span class="built_in">cd</span> myblog</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<p>新建完成后，指定文件夹的目录如下：</p>
<p>.<br>├── _config.yml<br>├── package.json<br>├── scaffolds<br>├── source<br>|   ├── _drafts<br>|   └── _posts<br>└── themes</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g <span class="comment">#生成静态文件</span></span><br><span class="line">$ hexo s <span class="comment">#启动服务器。默认情况下，访问网址为： http://localhost:4000/</span></span><br></pre></td></tr></table></figure>
<h2 id="新建GitHub仓库"><a href="#新建GitHub仓库" class="headerlink" title="新建GitHub仓库"></a>新建GitHub仓库</h2><p>首先创建一个仓库：</p>
<p><img src="/images/hexo/git.png"></p>
<p>前后的用户名要相同，因为我已经创建了，所以红字。</p>
<h2 id="部署到GitHub"><a href="#部署到GitHub" class="headerlink" title="部署到GitHub"></a>部署到GitHub</h2><p>打开本地的配置文件<code>_config.yml</code>，在最后添加：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository:  git@github.com: guihuashitang/guihuashitang.github.io.git </span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>部署先要下载一个插件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>安装完成之后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  <span class="comment">#清除缓存文件 (db.json) 和已生成的静态文件 (public)</span></span><br><span class="line">hexo g      <span class="comment">#生成静态文件</span></span><br><span class="line">hexo d      <span class="comment">#部署之前预先生成静态文件</span></span><br></pre></td></tr></table></figure>
<p>命令我都使用了缩写，具体命令或者其他命令可以查看<a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="noopener">hexo文档</a><br>部署成功之后就可以在https://你的仓库名.github.io上看到效果。</p>
<h2 id="添加评论功能"><a href="#添加评论功能" class="headerlink" title="添加评论功能"></a>添加评论功能</h2><p>评论使用了<a href="https://github.com/gitalk/gitalk" target="_blank" rel="noopener">gitalk</a>评论组件，我使用的主题是在官网上下载的叫做apollo，这个主题使用的是jade语法。</p>
<h4 id="1-注册-GitHub-Application"><a href="#1-注册-GitHub-Application" class="headerlink" title="1.注册 GitHub Application"></a>1.注册 <a href="https://github.com/gitalk/gitalk" target="_blank" rel="noopener">GitHub Application</a></h4><p><img src="/images/hexo/Application.png"></p>
<p>注册完之后会有Client ID和Client Secret</p>
<p><img src="/images/hexo/15637.png"></p>
<h4 id="2-配置"><a href="#2-配置" class="headerlink" title="2.配置"></a>2.配置</h4><p>在<code>apollo/_config.yml</code>中添加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">  enable: <span class="literal">true</span> <span class="comment">//用来做启用判断可以不用</span></span><br></pre></td></tr></table></figure>
<p>找到<code>apollo/layout/partial/head.jade</code>，引入css</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">link(rel=<span class="string">"stylesheet"</span>, href=<span class="string">"https://unpkg.com/gitalk/dist/gitalk.css"</span>)</span><br></pre></td></tr></table></figure>
<p>然后找到<code>apollo/layout/partial/comment.jade</code>，加入以下代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> theme.gitalk.enable  <span class="comment">//注意代码缩进</span></span><br><span class="line">  #gitalk-container</span><br><span class="line">  script(src=<span class="string">"https://unpkg.com/gitalk/dist/gitalk.min.js"</span>)</span><br><span class="line">  script.</span><br><span class="line">    <span class="keyword">var</span> gitalk = <span class="keyword">new</span> Gitalk(&#123;</span><br><span class="line">    clientID: <span class="string">'你自己的clientID'</span>,</span><br><span class="line">    clientSecret: <span class="string">'你自己的clientSecret'</span>,</span><br><span class="line">    id: location.pathname,</span><br><span class="line">    repo: <span class="string">'guihuashitang.github.io'</span>,</span><br><span class="line">    owner: <span class="string">'guihuashitang'</span>,</span><br><span class="line">    admin: [<span class="string">'guihuashitang'</span>],</span><br><span class="line">    distractionFreeMode: <span class="literal">true</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    gitalk.render(<span class="string">'gitalk-container'</span>)</span><br></pre></td></tr></table></figure>
<p>这是我的配置，也可以把所有的配置都加入到<code>_config.yml</code>中</p>
<p><img src="/images/hexo/111.png"></p>
<p><img src="/images/hexo/222.png"></p>
<p>然后打开你的仓库xxxx.github.io，在设置中打开Issues</p>
<p><img src="/images/hexo/12.png"></p>
<p><img src="/images/hexo/13.png"></p>
<p>最后重新部署，部署之后打开 <a href="https://guihuashitang.github.io/" target="_blank" rel="noopener">https://guihuashitang.github.io/</a> 就可以看到了,guihuashitang换成自己的用户名即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  <span class="comment">#清除缓存文件 (db.json) 和已生成的静态文件 (public)</span></span><br><span class="line">hexo g      <span class="comment">#生成静态文件</span></span><br><span class="line">hexo d      <span class="comment">#部署之前预先生成静态文件</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2019/07/22/5d3564b58bc6085232.jpg"></p>
</div></article></div></main><footer><div class="paginator"><a href="/2019/07/23/gulp/" class="prev">PREV</a><a href="/2019/07/11/hello-world/" class="next">NEXT</a></div><div id="gitalk-container"></div><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
clientID: '72889f2d7a255df9f337',
clientSecret: '7625f7e78c699cc24875913d6fb9fd4b5aa1e437',
id: location.pathname,
repo: 'guihuashitang.github.io',
owner: 'guihuashitang',
admin: ['guihuashitang'],
distractionFreeMode: true,
})
gitalk.render('gitalk-container')</script><div class="copyright"><p>© 2015 - 2019</p><p> <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span></span></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>